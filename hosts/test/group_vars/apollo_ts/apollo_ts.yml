### Apollo Timeseries Group Vars ###
#
# Variables specific to the lifecycle state of hosts ready to apply the
# apollo_ts role should go here. See the README file for the role for a
# description of these variables.


---
apollo_ts_postgresql_user: postgres
apollo_ts_postgresql_group: postgres
apollo_ts_apollo_monitor_ip_address: 0.0.0.0/0
apollo_ts_postgresql_database_name: []
apollo_ts_postgresql_listen_addresses: 
  - '{{ ansible_default_ipv4.address }}'


## Host based authentication (hba) entries to be added to the pg_hba.conf. 
# See: https://www.postgresql.org/docs/11/auth-pg-hba-conf.html
# Format: A list of dictionaries containing the following keys:
#   'type', 'database, 'user', 'auth_method', 'address', 'ip_address', 'ip_mask', 'auth_method', 'auth_options'

apollo_ts_postgresql_hba_entries: 
  ### Enter Custom Entries below ### 


  ### Default Entries (do not edit) ###
  # Give apollo_montior access to the apollo_ts timeseries tb
  - {type: hostssl, database: '{{ apollo_ts_postgresql_database_name }}' , user: apollo_monitor, address: '{{apollo_ts_apollo_monitor_ip_address }}', auth_method: md5}


  # Give the standard user access local access to all databases.
  - {type: local, database: all, user: '{{ apollo_ts_postgresql_user }}', auth_method: md5}
  - {type: host, database: all, user: '{{ apollo_ts_postgresql_user }}', address: '127.0.0.1/8', auth_method: md5}
  - {type: host, database: all, user: '{{ apollo_ts_postgresql_user }}', address: '0::1/128', auth_method: md5}

